import java.util.HashMap;
import java.util.Scanner;

public class StoreControl {
    private Store store;
    private CheckOut checkOut;
    private HashMap<String, Double> shoePrices;

    public StoreControl() {
        store = new Store();
        checkOut = new CheckOut();
        shoePrices = new HashMap<>();

        int shoeNumber = 1;
        for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 5; j++) {
                shoePrices.put("Shoe " + shoeNumber, 60.0 + (shoeNumber * 2));
                shoeNumber++;
            }
        }
    }

    public void runStore(Scanner scanner) {
        SignIn.login(scanner);
        boolean exit = false;

        while (!exit) {
            System.out.println("\n--- Nike Store Menu ---");
            System.out.println("1. View All Shoes");
            System.out.println("2. Choose Shoe and Add to Cart");
            System.out.println("3. View Cart / Checkout");
            System.out.println("4. Exit");
            System.out.print("Choose an option: ");
            String choice = scanner.nextLine();

            if (choice.equals("1")) {
                viewShoes();
            } else if (choice.equals("2")) {
                addToCart(scanner);
            } else if (choice.equals("3")) {
                checkOut.printCart();
            } else if (choice.equals("4")) {
                System.out.println("Thank you for visiting our Nike Store!");
                exit = true;
            } else {
                System.out.println("Invalid option.");
            }
        }
    }

    private void viewShoes() {
        store.storeOptions();
    }

    private void addToCart(Scanner scanner) {
        store.storeOptions();
        store.chooseShoes();
        String selectedShoe = store.getSelectedShoe(); 
        
        double price = shoePrices.getOrDefault(selectedShoe, 0.0);
        if (price > 0) {
            checkOut.addItem(selectedShoe, price);
        } else {
            System.out.println("Shoe not found or invalid name.");
        }
    }
 }
